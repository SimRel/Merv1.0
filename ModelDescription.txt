The simulated environment of the MERV model is initiated by positioning 100 agents onto a two-dimensional grid (hereafter called the “landscape”) and splitting them into two groups. One of these groups is always larger than the other, leading to majority and minority group designations, with disparity in size between them varying from negligible to extreme. Each agent in the majority group shares a network connection with every other agent in the majority group. Similarly, each agent in the minority group connects to every other agent in the minority group. At initialization, agents are assigned an AP and SP level sampled from a parameterized distribution (the distribution is triangular with the mode or peak set as a model parameter). Agents are also assigned a threshold (sampled in a similar way) which expresses the number of threats they will have to perceive before rising stress renders them hyper-vigilant and they seek to form clusters of religiously similar people in order to perform rituals together. 
At each time step agents can encounter natural (e.g. earthquake with tsunami), predation (e.g. hungry bear), social (e.g. violent rioting), or contagion (e.g. viral outbreak) hazards. Just as agents vary in their tolerance to hazards, hazards vary in intensity. Agents perceive a hazard only when its intensity surpasses the agent’s tolerance threshold. Different types of hazards affect agents in different ways. Natural and predation hazards occur solely by chance. At each time step, for each agent, a parameterized natural hazard distribution and a parameterized predation hazard distribution are sampled to determine the occurrence and intensity of the respective hazard. It is important to note that given this architecture hazards occur only for individual agents; hazards are not shared across multiple agents. While this abstraction does not capture some aspects of real-world interaction, it provides a simple and computationally efficient method for modeling natural and predation hazards.
The extent to which an agent perceives a social or contagion hazard depends on the agent’s position in the landscape. At each time step, an agent is assigned a social and contagion hazard intensity level based on sampling a parameterized distribution (again, a triangular distribution with mode set in a model parameter). This expresses the degree to which that agent poses a potential hazard to agents in the other group. After those assignments are made, each agent scans the landscape looking for an agent in the other group within a specified radius, based on another parameterized distribution. If the scanning agent locates an agent from the other group within the specified radius, the scanning agent checks to see if the intensity of the social or contagion hazard of the other agent meets or exceeds the scanning agent’s social or contagion tolerance. If so, the agent perceives the respective threat. If not, then the agent does not perceive a threat. 
As agents perceive threats, their stress level increases. Once the level exceeds an agent’s hyper-vigilance threshold, that agent searches for other in-group agents in order to share in a religious ritual. Each agent has a mixture of first-, second-, and third-order connections within the group’s network (measuring degrees of closeness). The process of searching for agents to join a religious ritual begins by searching first order-connections, then (if necessary) second- and third-order connections, corresponding to the tendency of humans (and indeed other social species) to cluster with those better known to them.
A ritual cluster forms among agents whose affect has passed the hyper-vigilance threshold, with some agents passing the threshold sooner than others depending on their hazard sensitivity. During a religious ritual, the affect of each participating agent decreases until all participating agents fall back below the hyper-vigilance threshold, which marks the completion of the ritual. Upon completion of the ritual, the AP and SP religiosity values of each agent change toward the mean AP and SP values of the other ritual participants. This entire process repeats for each time step.
